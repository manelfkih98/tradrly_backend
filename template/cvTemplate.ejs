<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; color: #333; }
    h1, h2, h3 { margin: 5px 0; }
    header { text-align: center; margin-bottom: 30px; }
    .info { font-size: 14px; color: #555; }
    section { margin-bottom: 25px; }
    h3 { border-bottom: 1px solid #ccc; padding-bottom: 5px; color: #444; }
    ul { list-style: disc; padding-left: 20px; }
    li { margin: 5px 0; }
    a { color: #555; text-decoration: none; }
  </style>
</head>
<body>
  <header>
    <h1><%= nom %> <%= prenom %></h1>
    <h2><%= titre || "Candidat(e)" %></h2>
    <div class="info">
      <p><%= telephone %> • <%= email %></p>
      <p><%= adresse %> • <a href="<%= linkedin %>"><%= linkedin %></a></p>
      <p>Date de naissance : <%= new Date(dateNaissance).toLocaleDateString('fr-FR') %></p>
      <% if (niveauEtude) { %>
        <p>Niveau d'étude : <%= niveauEtude %></p>
      <% } %>
    </div>
  </header>

  <section>
    <h3>Profil</h3>
    <p><%= profil %></p>
  </section>

  <section>
    <h3>Compétences</h3>
    <ul>
      <% 
        const competencesArray = Array.isArray(competences) ? competences : typeof competences === 'string' ? [competences] : [];
        if (competencesArray.length) { 
      %>
        <% competencesArray.forEach(c => { %>
          <li><%= c %></li>
        <% }) %>
      <% } else { %>
        <li>Aucune compétence spécifiée</li>
      <% } %>
    </ul>
  </section>

  <section>
    <h3>Compétences Générales</h3>
    <ul>
      <% 
        const generalesArray = Array.isArray(generales) ? generales : typeof generales === 'string' ? [generales] : [];
        if (generalesArray.length) { 
      %>
        <% generalesArray.forEach(g => { %>
          <li><%= g %></li>
        <% }) %>
      <% } else { %>
        <li>Aucune compétence générale spécifiée</li>
      <% } %>
    </ul>
  </section>

  <section>
    <h3>Langues</h3>
    <ul>
      <% 
        const languesArray = Array.isArray(langues) ? langues : typeof langues === 'string' ? [langues] : [];
        if (languesArray.length) { 
      %>
        <% languesArray.forEach(l => { %>
          <li><%= l %></li>
        <% }) %>
      <% } else { %>
        <li>Aucune langue spécifiée</li>
      <% } %>
    </ul>
  </section>
</body>
</html>
